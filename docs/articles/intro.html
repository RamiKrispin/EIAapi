<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the EIA API • EIAapi</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the EIA API">
<meta property="og:description" content="EIAapi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EIAapi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Introduction to the EIA API</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/RamiKrispin/EIAapi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to the EIA API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RamiKrispin/EIAapi/blob/HEAD/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<p>The <a href="https://www.eia.gov/" class="external-link">U.S. Energy Information
Administration</a> (EIA) hosts a variety of time series data describing
the U.S. energy sector. The EIA data is open and accessible through an
Application Programming Interface (API) for free. The
<strong>EIAapi</strong> package provides functions to query and pull
tidy data from the <a href="https://www.eia.gov/opendata/" class="external-link">EIA API
v2</a>.</p>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<p>To pull data from the API using this package, you will need the
following:</p>
<ul>
<li>
<strong>jq</strong> - The package uses <a href="https://stedolan.github.io/jq/" class="external-link">jq</a> to parse the API output
from JSON to tabular format. To download and install jq follow the
instructions on the <a href="https://stedolan.github.io/jq/download/" class="external-link">download page</a>.</li>
<li>
<strong>API key</strong> - To query the EIA API, you must register
to the service to receive the API key.</li>
</ul>
<p>To register to the API, go to <a href="https://www.eia.gov/opendata/" class="external-link uri">https://www.eia.gov/opendata/</a>, click the
<code>Register</code> button, and follow the instructions (see the
screenshot below).</p>
<p><br></p>
<p><a href="https://www.eia.gov/opendata/browser/" class="external-link"><img src="images/register.png" width="100%" align="center"></a></p>
</div>
<div class="section level2">
<h2 id="getting-started-with-the-eiaapi">Getting started with the EIAapi<a class="anchor" aria-label="anchor" href="#getting-started-with-the-eiaapi"></a>
</h2>
<p>The EIAapi package provides the following functions:</p>
<ul>
<li>
<code>eia_metadata</code> - Returns information and metadata from
the API about the available categories and subcategories (routes)</li>
<li>
<code>eia_get</code> - Enables query data from the API</li>
</ul>
<p>A good place to start exploring the available categories and
subcategories of the API is on the <a href="https://www.eia.gov/opendata/browser/" class="external-link">API Dashboard</a>. For
example, let’s explore the hourly demand for electricity in the
California sub-region in the dashboard and use the metadata to set the
query parameters. Let’s start by set the <code>API Route</code> to
<code>Electricity</code> -&gt;
<code>Electric Power Operrations (Daily And Hourly)</code> -&gt;
<code>Hourly Demand Subregion</code>, as shown in the screenshot below.
Once the data route is set, define the <code>PARENT</code> facet as
<code>CISO</code>. This will filter the options in the next facet -
<code>SUBBA</code> to the four operators in California. Let’s select
<code>CISO: (PGAE) Pacific Gas and Electric</code> and save the
selection:</p>
<p><br></p>
<p><img src="images/dashboard1.png" width="100%" align="center"></p>
<p><br></p>
<p>Once finalize the routes,facets, and any other filters, you can
submit the query and you should receive the API metadata. For the
selection above, here is the expected respond:</p>
<p><br></p>
<p><img src="images/dashboard2.png" width="100%" align="center"></p>
<p><br></p>
<p>Let’s look at the returned metadata above and use it to set the query
to pull the data, starting with the <code>API URL</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>https://api.eia.gov/v2/electricity/rto/region-sub-ba-data/data/?frequency=hourly<span class="er">&amp;</span>data[0]=value<span class="er">&amp;</span>facets[parent][]=CISO<span class="er">&amp;</span>facets[subba][]=PGAE<span class="er">&amp;</span>sort[0][column]=period<span class="er">&amp;</span>sort[0][direction]=desc<span class="er">&amp;</span>offset=0<span class="er">&amp;</span>length=5000</span></code></pre></div>
<p>The URL contains the following components:</p>
<ul>
<li>The API endpoint - <code>https://api.eia.gov/v2/</code>
</li>
<li>The data path - <code>rto/region-sub-ba-data/data/</code>
</li>
<li>The query -
<code>?frequency=hourly&amp;data[0]=value&amp;facets[parent][]=CISO&amp;facets[subba][]=PGAE&amp;sort[0][column]=period&amp;sort[0][direction]=desc&amp;offset=0&amp;length=5000</code>
</li>
</ul>
<p>We will use the data path to set the <code>api_path</code>. To set
the query parameters, you can use the embedded query in the URL by
extracting the values of the different filters (frequency, facet, etc.)
or use the query header on the right side:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="er">X-Params:</span> <span class="fu">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dt">"frequency"</span><span class="fu">:</span> <span class="st">"hourly"</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="dt">"data"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="st">"value"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="dt">"facets"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="dt">"parent"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="st">"CISO"</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="dt">"subba"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="st">"PGAE"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">},</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="dt">"start"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="dt">"end"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="dt">"sort"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="dt">"column"</span><span class="fu">:</span> <span class="st">"period"</span><span class="fu">,</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="dt">"direction"</span><span class="fu">:</span> <span class="st">"desc"</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="dt">"offset"</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="dt">"length"</span><span class="fu">:</span> <span class="dv">5000</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>We can now set the query by defining the <code>frequency</code>,
<code>data</code>, and <code>facets</code> arguments as defined in the
header above:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RamiKrispin/EIAapi" class="external-link">EIAapi</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_get.html">eia_get</a></span><span class="op">(</span>api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"eia_key"</span><span class="op">)</span>,</span>
<span>               api_path <span class="op">=</span> <span class="st">"electricity/rto/region-sub-ba-data/data/"</span>,</span>
<span>               frequency <span class="op">=</span> <span class="st">"hourly"</span>,</span>
<span>               data <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>               facets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>parent <span class="op">=</span> <span class="st">"CISO"</span>,</span>
<span>                             subba <span class="op">=</span> <span class="st">"PGAE"</span><span class="op">)</span>,</span>
<span>               offset <span class="op">=</span> <span class="fl">0</span>,</span>
<span>               length <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span>
<span><span class="co">#&gt;          period subba               subba-name parent</span></span>
<span><span class="co">#&gt; 1 2019-09-02T07  PGAE Pacific Gas and Electric   CISO</span></span>
<span><span class="co">#&gt; 2 2019-09-01T11  PGAE Pacific Gas and Electric   CISO</span></span>
<span><span class="co">#&gt; 3 2019-09-01T10  PGAE Pacific Gas and Electric   CISO</span></span>
<span><span class="co">#&gt; 4 2019-09-02T04  PGAE Pacific Gas and Electric   CISO</span></span>
<span><span class="co">#&gt; 5 2019-09-01T21  PGAE Pacific Gas and Electric   CISO</span></span>
<span><span class="co">#&gt; 6 2019-09-02T05  PGAE Pacific Gas and Electric   CISO</span></span>
<span><span class="co">#&gt;                              parent-name value   value-units</span></span>
<span><span class="co">#&gt; 1 California Independent System Operator 12431 megawatthours</span></span>
<span><span class="co">#&gt; 2 California Independent System Operator 10270 megawatthours</span></span>
<span><span class="co">#&gt; 3 California Independent System Operator 10620 megawatthours</span></span>
<span><span class="co">#&gt; 4 California Independent System Operator 15685 megawatthours</span></span>
<span><span class="co">#&gt; 5 California Independent System Operator 12945 megawatthours</span></span>
<span><span class="co">#&gt; 6 California Independent System Operator 14750 megawatthours</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df1</span><span class="op">$</span><span class="va">parent</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "CISO"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df1</span><span class="op">$</span><span class="va">subba</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "PGAE"</span></span></code></pre></div>
<p><strong>Note:</strong> The API limit the number of observations per a
call to 5000. If you wish to pull more than 5000 observations you can
iterate your call and set the <code>start</code> and <code>end</code>
arguments as a rolling window function. Similarly, you can use the
<code>length</code> and <code>offset</code> arguments to define the
rolling function.</p>
</div>
<div class="section level2">
<h2 id="api-metadata">API metadata<a class="anchor" aria-label="anchor" href="#api-metadata"></a>
</h2>
<p>The EIA API provides detailed information and metadata about the
categories and time series available in the API. This enables extracting
information programmatically about different data parameters. The
eia_metadata enables query metadata from the API. The function has two
arguments:</p>
<ul>
<li>
<code>api_path</code> - the API category/route path following the
API endpoint (i.e., <code>https://api.eia.gov/v2/</code>)</li>
<li>
<code>api_key</code> - the API key</li>
</ul>
<div class="section level3">
<h3 id="category-metadata">Category metadata<a class="anchor" aria-label="anchor" href="#category-metadata"></a>
</h3>
<p>Querying metadata is done by sending a request with a specific route
path, and the API, in response, returns the available sub-categories
under that path. For example, setting the <code>api_path</code> argument
empty or <code>NULL</code> returns a list with the API main
categories:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">main_route</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_metadata.html">eia_metadata</a></span><span class="op">(</span>api_path <span class="op">=</span> <span class="st">""</span>,</span>
<span>                           api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"eia_key"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">main_route</span><span class="op">$</span><span class="va">routes</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"name"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                   id                            name</span></span>
<span><span class="co">#&gt; 1               coal                            Coal</span></span>
<span><span class="co">#&gt; 2  crude-oil-imports               Crude Oil Imports</span></span>
<span><span class="co">#&gt; 3        electricity                     Electricity</span></span>
<span><span class="co">#&gt; 4      international                   International</span></span>
<span><span class="co">#&gt; 5        natural-gas                     Natural Gas</span></span>
<span><span class="co">#&gt; 6    nuclear-outages                 Nuclear Outages</span></span>
<span><span class="co">#&gt; 7          petroleum                       Petroleum</span></span>
<span><span class="co">#&gt; 8               seds State Energy Data System (SEDS)</span></span>
<span><span class="co">#&gt; 9               steo       Short Term Energy Outlook</span></span>
<span><span class="co">#&gt; 10 densified-biomass               Densified Biomass</span></span>
<span><span class="co">#&gt; 11      total-energy                    Total Energy</span></span>
<span><span class="co">#&gt; 12               aeo           Annual Energy Outlook</span></span>
<span><span class="co">#&gt; 13               ieo    International Energy Outlook</span></span>
<span><span class="co">#&gt; 14     co2-emissions             State CO2 Emissions</span></span></code></pre></div>
<p>Similarly, we can continue and extract the sub-categories under the
electricity category by setting the <code>api_path</code> argument to
<code>electricity</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">main_route</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_metadata.html">eia_metadata</a></span><span class="op">(</span>api_path <span class="op">=</span> <span class="st">"electricity"</span>,</span>
<span>                           api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"eia_key"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">main_route</span><span class="op">$</span><span class="va">routes</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"name"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                                id</span></span>
<span><span class="co">#&gt; 1                    retail-sales</span></span>
<span><span class="co">#&gt; 2 electric-power-operational-data</span></span>
<span><span class="co">#&gt; 3                             rto</span></span>
<span><span class="co">#&gt; 4      state-electricity-profiles</span></span>
<span><span class="co">#&gt; 5    operating-generator-capacity</span></span>
<span><span class="co">#&gt; 6                   facility-fuel</span></span>
<span><span class="co">#&gt;                                                                         name</span></span>
<span><span class="co">#&gt; 1                                    Electricity Sales to Ultimate Customers</span></span>
<span><span class="co">#&gt; 2                             Electric Power Operations (Annual and Monthly)</span></span>
<span><span class="co">#&gt; 3                               Electric Power Operations (Daily and Hourly)</span></span>
<span><span class="co">#&gt; 4                                                        State Specific Data</span></span>
<span><span class="co">#&gt; 5                                           Inventory of Operable Generators</span></span>
<span><span class="co">#&gt; 6 Electric Power Operations for Individual Power Plants (Annual and Monthly)</span></span></code></pre></div>
<p><strong>Note:</strong> the number of sub-categories or routes varies
between the different categories.</p>
</div>
<div class="section level3">
<h3 id="series-metadata">Series metadata<a class="anchor" aria-label="anchor" href="#series-metadata"></a>
</h3>
<p>The last route in the API path defines the series available under
those categories. For example, we used the above to pull the hourly
demand for electricity by sub-region the following URL:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>https://api.eia.gov/v2/electricity/rto/region-sub-ba-data/data/?frequency=hourly<span class="er">&amp;</span>data[0]=value<span class="er">&amp;</span>facets[parent][]=CISO<span class="er">&amp;</span>facets[subba][]=PGAE<span class="er">&amp;</span>sort[0][column]=period<span class="er">&amp;</span>sort[0][direction]=desc<span class="er">&amp;</span>offset=0<span class="er">&amp;</span>length=5000</span></code></pre></div>
<p>In this case, the path is defined as -
<code>electricity/rto/region-sub-ba-data/</code>, where:</p>
<ul>
<li>
<code>electricity</code> is the main category</li>
<li>
<code>rto</code> - is the sub-category under electricity
representing the Electric Power Operations (Daily and Hourly), and</li>
<li>
<code>region-sub-ba-data</code> - is the last sub-category in this
route, representing the Hourly Demand by Sub-region</li>
</ul>
<p>You can notice that the last sub-category in this path -
<code>region-sub-ba-data</code> ended with <code>data</code> to indicate
to the user that this is the last route, and under it there is data. The
metadata for the time series has a different structure with respect to
the category metadata. It provides useful information such as: -
Starting and ending time of the series - Available facets - Series
Frequency</p>
<p>For example, let’s query for Demand by Sub-region metadata:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">elec_sub_route</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_metadata.html">eia_metadata</a></span><span class="op">(</span>api_path <span class="op">=</span> <span class="st">"electricity/rto/region-sub-ba-data/"</span>,</span>
<span>                               api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"eia_key"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">elec_sub_route</span> </span>
<span><span class="co">#&gt; $id</span></span>
<span><span class="co">#&gt; [1] "region-sub-ba-data"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "Hourly Demand by Subregion"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $description</span></span>
<span><span class="co">#&gt; [1] "Hourly demand by balancing authority subregion.  \n    Source: Form EIA-930\n    Product: Hourly Electric Grid Monitor"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $frequency</span></span>
<span><span class="co">#&gt;             id                    alias</span></span>
<span><span class="co">#&gt; 1       hourly             hourly (UTC)</span></span>
<span><span class="co">#&gt; 2 local-hourly hourly (Local Time Zone)</span></span>
<span><span class="co">#&gt;                                   description query               format</span></span>
<span><span class="co">#&gt; 1   One data point for each hour in UTC time.     H    YYYY-MM-DD"T"HH24</span></span>
<span><span class="co">#&gt; 2 One data point for each hour in local time.    LH YYYY-MM-DD"T"HH24TZH</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $facets</span></span>
<span><span class="co">#&gt;       id         description</span></span>
<span><span class="co">#&gt; 1  subba           Subregion</span></span>
<span><span class="co">#&gt; 2 parent Balancing Authority</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; $data$value</span></span>
<span><span class="co">#&gt; $data$value$`aggregation-method`</span></span>
<span><span class="co">#&gt; [1] "SUM"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data$value$alias</span></span>
<span><span class="co">#&gt; [1] "Demand"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data$value$units</span></span>
<span><span class="co">#&gt; [1] "megawatthours"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $startPeriod</span></span>
<span><span class="co">#&gt; [1] "2018-06-19T05"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $endPeriod</span></span>
<span><span class="co">#&gt; [1] "2023-04-29T07"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $defaultDateFormat</span></span>
<span><span class="co">#&gt; [1] "YYYY-MM-DD\"T\"HH24"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $defaultFrequency</span></span>
<span><span class="co">#&gt; [1] "hourly"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $command</span></span>
<span><span class="co">#&gt; [1] "/v2/electricity/rto/region-sub-ba-data/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "list"         "eia_metadata"</span></span></code></pre></div>
<p>You can continue and query additional information on this series. For
example, let’s extract the list of balancing authorities that are
available for this series under the <code>parent</code> facet:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="fu"><a href="../reference/eia_metadata.html">eia_metadata</a></span><span class="op">(</span>api_path <span class="op">=</span> <span class="st">"electricity/rto/region-sub-ba-data/facet/parent"</span>,</span>
<span>                               api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"eia_key"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $totalFacets</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $facets</span></span>
<span><span class="co">#&gt;     id                                           name</span></span>
<span><span class="co">#&gt; 1 SWPP                           Southwest Power Pool</span></span>
<span><span class="co">#&gt; 2 NYIS           New York Independent System Operator</span></span>
<span><span class="co">#&gt; 3 ISNE                                ISO New England</span></span>
<span><span class="co">#&gt; 4 MISO Midcontinent Independent System Operator, Inc.</span></span>
<span><span class="co">#&gt; 5 ERCO    Electric Reliability Council of Texas, Inc.</span></span>
<span><span class="co">#&gt; 6 CISO         California Independent System Operator</span></span>
<span><span class="co">#&gt; 7  PNM           Public Service Company of New Mexico</span></span>
<span><span class="co">#&gt; 8  PJM                       PJM Interconnection, LLC</span></span>
<span><span class="co">#&gt;                                                   alias</span></span>
<span><span class="co">#&gt; 1                           (SWPP) Southwest Power Pool</span></span>
<span><span class="co">#&gt; 2           (NYIS) New York Independent System Operator</span></span>
<span><span class="co">#&gt; 3                                (ISNE) ISO New England</span></span>
<span><span class="co">#&gt; 4 (MISO) Midcontinent Independent System Operator, Inc.</span></span>
<span><span class="co">#&gt; 5    (ERCO) Electric Reliability Council of Texas, Inc.</span></span>
<span><span class="co">#&gt; 6         (CISO) California Independent System Operator</span></span>
<span><span class="co">#&gt; 7            (PNM) Public Service Company of New Mexico</span></span>
<span><span class="co">#&gt; 8                        (PJM) PJM Interconnection, LLC</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $command</span></span>
<span><span class="co">#&gt; [1] "/v2/electricity/rto/region-sub-ba-data/facet/parent/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "list"         "eia_metadata"</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rami Krispin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
